(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const b="modulepreload",P=function(e){return"/staticsnack-template-blog/"+e},x={},$=function(t,o,i){let s=Promise.resolve();if(o&&o.length>0){let d=function(a){return Promise.all(a.map(n=>Promise.resolve(n).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};var y=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(o.map(a=>{if(a=P(a),a in x)return;x[a]=!0;const n=a.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const r=document.createElement("link");if(r.rel=n?"stylesheet":b,n||(r.as="script"),r.crossOrigin="",r.href=a,f&&r.setAttribute("nonce",f),document.head.appendChild(r),n)return new Promise((w,g)=>{r.addEventListener("load",w),r.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return t().catch(c)})};let p=null,h={};async function j(e="site-assets.json",t){let o="site-assets.json",i=t;typeof e=="function"?i=e:e&&(o=e);try{return p=await(await fetch(o)).json(),await v(),await L(i),{siteAssets:p,contentData:h}}catch(s){throw console.error("Error loading site assets:",s),s}}async function v(){if(!(!p||!p.assets))for(const e of p.assets){if(e.type==="directory"){e.contains&&e.contains.type==="combo"?h[e.path]=await O(e):e.contains?h[e.path]=await A(e):h[e.path]=e.path;continue}if(e.type==="image"){h[e.path]=e.path;continue}try{const t=await fetch(e.path);if(!t.ok)continue;if(e.type==="json"||e.path.endsWith(".json"))h[e.path]=await t.json();else if(e.type==="text"&&e.path.endsWith(".md")){const o=await t.text();h[e.path]=o}}catch(t){console.warn(`Failed to load ${e.path}:`,t)}}}async function O(e){const t={},o=e.path,i={};e.contains.parts.forEach(n=>{n.allowedExtensions.forEach(l=>{i[l]=n.assetType})});const s=await fetch(o);if(!s.ok)return console.warn(`Could not access directory: ${o}`),t;const c=await s.text(),f=new DOMParser().parseFromString(c,"text/html").querySelectorAll("a"),d=[];f.forEach(n=>{const l=n.getAttribute("href");if(l&&!l.startsWith("..")&&!l.endsWith("/")){const r=l.split("/").pop(),w=r.substring(r.lastIndexOf("."));i[w]&&d.push(r)}});const a={};d.forEach(n=>{const l=n.substring(n.lastIndexOf(".")),r=n.substring(0,n.lastIndexOf("."));a[r]||(a[r]={}),a[r][l]=n});for(const[n,l]of Object.entries(a)){t[n]={};for(const[r,w]of Object.entries(l)){const g=i[r],E=`${o}/${w}`;try{if(g==="image")t[n][r]=E;else if(g==="json"){const m=await fetch(E);m.ok&&(t[n][r]=await m.json())}else if(g==="text"){const m=await fetch(E);m.ok&&(t[n][r]=await m.text())}}catch(m){console.warn(`Failed to load ${E}:`,m)}}}return t}async function A(e){const t=[],o=e.path;try{const i=await fetch(o);if(!i.ok)return t;const s=await i.text();new DOMParser().parseFromString(s,"text/html").querySelectorAll("a").forEach(f=>{const d=f.getAttribute("href");if(d&&!d.startsWith("..")&&!d.endsWith("/")){const a=d.split("/").pop(),n=a.substring(a.lastIndexOf("."));e.contains.allowedExtensions.includes(n)&&t.push(`${o}/${a}`)}})}catch(i){console.warn(`Failed to load directory ${o}:`,i)}return t}async function L(e){if(!p||!p.assets){e&&e();return}for(const t of p.assets)if(t.handler)try{const o=t.handler.endsWith(".js")?t.handler:`${t.handler}.js`,i=await $(()=>import(`./${o}`),[]);if(typeof i.handle=="function"){const s=h[t.path];i.handle(s,t.path)}else console.warn(`Handler ${t.handler} does not export a handle function`)}catch(o){console.error(`Failed to load handler ${t.handler}:`,o)}e&&e()}document.addEventListener("DOMContentLoaded",async function(){try{console.log("Loading site assets..."),await j(()=>{console.log("All assets and handlers loaded successfully!")})}catch(e){console.error("Error initializing site:",e)}});
