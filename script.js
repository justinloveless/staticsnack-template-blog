(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const x="modulepreload",b=function(e){return"/staticsnack-template-blog/"+e},j={},$=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){let y=function(l){return Promise.all(l.map(o=>Promise.resolve(o).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};var p=y;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");s=y(n.map(l=>{if(l=b(l),l in j)return;j[l]=!0;const o=l.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":x,o||(r.as="script"),r.crossOrigin="",r.href=l,f&&r.setAttribute("nonce",f),document.head.appendChild(r),o)return new Promise((w,g)=>{r.addEventListener("load",w),r.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(d){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d}return s.then(d=>{for(const f of d||[])f.status==="rejected"&&a(f.reason);return t().catch(a)})};let h=null,u={};async function P(e="site-assets.json",t){let n="site-assets.json",i=t;typeof e=="function"?i=e:e&&(n=e);try{return h=await(await fetch(n)).json(),await v(),await L(i),{siteAssets:h,contentData:u}}catch(s){throw console.error("Error loading site assets:",s),s}}async function v(){if(!(!h||!h.assets))for(const e of h.assets){if(e.type==="directory"){e.contains&&e.contains.type==="combo"?u[e.path]=await A(e):e.contains?u[e.path]=await O(e):u[e.path]=e.path;continue}if(e.type==="image"){u[e.path]=e.path;continue}try{const t=await fetch(e.path);if(!t.ok)continue;if(e.type==="json"||e.path.endsWith(".json"))u[e.path]=await t.json();else if(e.type==="text"&&e.path.endsWith(".md")){const n=await t.text();u[e.path]=n}}catch(t){console.warn(`Failed to load ${e.path}:`,t)}}}async function A(e){const t={},n=e.path,i={};e.contains.parts.forEach(o=>{o.allowedExtensions.forEach(c=>{i[c]=o.assetType})});const s=await fetch(n);if(!s.ok)return console.warn(`Could not access directory: ${n}`),t;const a=await s.text(),f=new DOMParser().parseFromString(a,"text/html").querySelectorAll("a"),y=[];f.forEach(o=>{const c=o.getAttribute("href");if(c&&!c.startsWith("..")&&!c.endsWith("/")){const r=c.split("/").pop(),w=r.substring(r.lastIndexOf("."));i[w]&&y.push(r)}});const l={};y.forEach(o=>{const c=o.substring(o.lastIndexOf(".")),r=o.substring(0,o.lastIndexOf("."));l[r]||(l[r]={}),l[r][c]=o});for(const[o,c]of Object.entries(l)){t[o]={};for(const[r,w]of Object.entries(c)){const g=i[r],E=`${n}/${w}`;try{if(g==="image")t[o][r]=E;else if(g==="json"){const m=await fetch(E);m.ok&&(t[o][r]=await m.json())}else if(g==="text"){const m=await fetch(E);m.ok&&(t[o][r]=await m.text())}}catch(m){console.warn(`Failed to load ${E}:`,m)}}}return t}async function O(e){const t=[],n=e.path;try{const i=await fetch(`${n}/manifest.json`);if(i.ok){const s=await i.json();if(s.files&&Array.isArray(s.files))return s.files.forEach(a=>{const p=a.substring(a.lastIndexOf("."));e.contains.allowedExtensions.includes(p)&&t.push(`${n}/${a}`)}),t}else console.warn(`No manifest.json found at ${n}/manifest.json`)}catch(i){console.error(`Failed to load manifest from ${n}/manifest.json:`,i)}return t}async function L(e){if(!h||!h.assets){e&&e();return}for(const t of h.assets)if(t.handler)try{const n=t.handler.endsWith(".js")?t.handler:`${t.handler}.js`,i=await $(()=>import(`./${n}`),[]);if(typeof i.handle=="function"){const s=u[t.path];i.handle(s,t.path)}else console.warn(`Handler ${t.handler} does not export a handle function`)}catch(n){console.error(`Failed to load handler ${t.handler}:`,n)}e&&e()}document.addEventListener("DOMContentLoaded",async function(){try{console.log("Loading site assets..."),await P(()=>{console.log("All assets and handlers loaded successfully!")})}catch(e){console.error("Error initializing site:",e)}});
