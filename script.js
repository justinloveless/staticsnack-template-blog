(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const b="modulepreload",$=function(t){return"/staticsnack-template-blog/"+t},E={},j=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(c){return Promise.all(c.map(o=>Promise.resolve(o).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};var h=d;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=u?.nonce||u?.getAttribute("nonce");s=d(n.map(c=>{if(c=$(c),c in E)return;E[c]=!0;const o=c.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":b,o||(i.as="script"),i.crossOrigin="",i.href=c,f&&i.setAttribute("nonce",f),document.head.appendChild(i),o)return new Promise((w,g)=>{i.addEventListener("load",w),i.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return s.then(u=>{for(const f of u||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};let y=null,p={};async function P(t="site-assets.json",e){let n="site-assets.json",r=e;typeof t=="function"?r=t:t&&(n=t);try{return y=await(await fetch(n)).json(),await A(),await L(r),{siteAssets:y,contentData:p}}catch(s){throw console.error("Error loading site assets:",s),s}}async function A(){if(!(!y||!y.assets))for(const t of y.assets){if(t.type==="directory"){t.contains&&t.contains.type==="combo"?p[t.path]=await O(t):t.contains?p[t.path]=await v(t):p[t.path]=t.path;continue}if(t.type==="image"){p[t.path]=t.path;continue}try{const e=await fetch(t.path);if(!e.ok)continue;if(t.type==="json"||t.path.endsWith(".json"))p[t.path]=await e.json();else if(t.type==="text"&&t.path.endsWith(".md")){const n=await e.text();p[t.path]=n}}catch(e){console.warn(`Failed to load ${t.path}:`,e)}}}async function O(t){const e={},n=t.path,r={};t.contains.parts.forEach(o=>{o.allowedExtensions.forEach(l=>{r[l]=o.assetType})});const s=await fetch(n);if(!s.ok)return console.warn(`Could not access directory: ${n}`),e;const a=await s.text(),f=new DOMParser().parseFromString(a,"text/html").querySelectorAll("a"),d=[];f.forEach(o=>{const l=o.getAttribute("href");if(l&&!l.startsWith("..")&&!l.endsWith("/")){const i=l.split("/").pop(),w=i.substring(i.lastIndexOf("."));r[w]&&d.push(i)}});const c={};d.forEach(o=>{const l=o.substring(o.lastIndexOf(".")),i=o.substring(0,o.lastIndexOf("."));c[i]||(c[i]={}),c[i][l]=o});for(const[o,l]of Object.entries(c)){e[o]={};for(const[i,w]of Object.entries(l)){const g=r[i],x=`${n}/${w}`;try{if(g==="image")e[o][i]=x;else if(g==="json"){const m=await fetch(x);m.ok&&(e[o][i]=await m.json())}else if(g==="text"){const m=await fetch(x);m.ok&&(e[o][i]=await m.text())}}catch(m){console.warn(`Failed to load ${x}:`,m)}}}return e}async function v(t){const e=[],n=t.path;try{const r=await fetch(`${n}/manifest.json`);if(r.ok){const s=await r.json();if(s.files&&Array.isArray(s.files))return s.files.forEach(a=>{const h=a.substring(a.lastIndexOf("."));t.contains.allowedExtensions.includes(h)&&e.push(`${n}/${a}`)}),e}}catch{console.log(`No manifest found at ${n}/manifest.json, trying directory listing`)}try{const r=await fetch(n);if(!r.ok)return e;const s=await r.text();new DOMParser().parseFromString(s,"text/html").querySelectorAll("a").forEach(f=>{const d=f.getAttribute("href");if(d&&!d.startsWith("..")&&!d.endsWith("/")){const c=d.split("/").pop(),o=c.substring(c.lastIndexOf("."));t.contains.allowedExtensions.includes(o)&&e.push(`${n}/${c}`)}})}catch(r){console.warn(`Failed to load directory ${n}:`,r)}return e}async function L(t){if(!y||!y.assets){t&&t();return}for(const e of y.assets)if(e.handler)try{const n=e.handler.endsWith(".js")?e.handler:`${e.handler}.js`,r=await j(()=>import(`./${n}`),[]);if(typeof r.handle=="function"){const s=p[e.path];r.handle(s,e.path)}else console.warn(`Handler ${e.handler} does not export a handle function`)}catch(n){console.error(`Failed to load handler ${e.handler}:`,n)}t&&t()}document.addEventListener("DOMContentLoaded",async function(){try{console.log("Loading site assets..."),await P(()=>{console.log("All assets and handlers loaded successfully!")})}catch(t){console.error("Error initializing site:",t)}});
